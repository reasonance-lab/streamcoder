import streamlit as st
import requests
import json

# Set up the Streamlit page
st.set_page_config(page_title="Drug Information Lookup", page_icon="ðŸ’Š", layout="wide")
st.title("Drug Information Lookup")

# User input for drug name
drug_name = st.text_input("Enter a drug name:", "")

if drug_name:
    # FDA API endpoint
    api_url = f"https://api.fda.gov/drug/label.json?search=openfda.brand_name:{drug_name}&limit=1"

    try:
        # Make API request
        response = requests.get(api_url)
        data = response.json()

        if 'results' in data and len(data['results']) > 0:
            drug_info = data['results'][0]

            # Display drug information
            st.header(f"Information for {drug_name}")

            # Create three columns for better layout
            col1, col2, col3 = st.columns(3)

            with col1:
                st.subheader("General Information")
                st.write(f"**Brand Name:** {drug_info['openfda'].get('brand_name', ['N/A'])[0]}")
                st.write(f"**Generic Name:** {drug_info['openfda'].get('generic_name', ['N/A'])[0]}")
                st.write(f"**Manufacturer:** {drug_info['openfda'].get('manufacturer_name', ['N/A'])[0]}")

            with col2:
                st.subheader("Usage")
                st.write(f"**Indications:** {drug_info.get('indications_and_usage', ['N/A'])[0]}")
                st.write(f"**Route:** {drug_info['openfda'].get('route', ['N/A'])[0]}")

            with col3:
                st.subheader("Warnings")
                st.write(f"**Warnings:** {drug_info.get('warnings', ['N/A'])[0]}")

            # Additional information in expandable sections
            with st.expander("Dosage and Administration"):
                st.write(drug_info.get('dosage_and_administration', ['N/A'])[0])

            with st.expander("Adverse Reactions"):
                st.write(drug_info.get('adverse_reactions', ['N/A'])[0])

            with st.expander("Drug Interactions"):
                st.write(drug_info.get('drug_interactions', ['N/A'])[0])

        else:
            st.error(f"No information found for {drug_name}")

    except requests.exceptions.RequestException as e:
        st.error(f"An error occurred while fetching data: {e}")

# Footer
st.markdown("---")
st.markdown("Data provided by the [FDA API](https://open.fda.gov/)")