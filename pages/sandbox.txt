import streamlit as st
import requests

# Function to fetch drug information from FDA API
def get_drug_info(drug_name):
    base_url = "https://api.fda.gov/drug/label.json"
    params = {
        "search": f"openfda.brand_name:{drug_name}",
        "limit": 1
    }
    
    response = requests.get(base_url, params=params)
    
    if response.status_code == 200:
        data = response.json()
        if data["results"]:
            return data["results"][0]
    return None

# Streamlit app
st.title("Drug Information Lookup")

# User input for drug name
drug_name = st.text_input("Enter a drug name:")

if drug_name:
    drug_info = get_drug_info(drug_name)
    
    if drug_info:
        st.subheader(f"Information for {drug_name}")
        
        # Display drug information
        if "indications_and_usage" in drug_info:
            st.write("**Indications and Usage:**")
            st.write(drug_info["indications_and_usage"][0])
        
        if "warnings" in drug_info:
            st.write("**Warnings:**")
            st.write(drug_info["warnings"][0])
        
        if "dosage_and_administration" in drug_info:
            st.write("**Dosage and Administration:**")
            st.write(drug_info["dosage_and_administration"][0])
        
        if "adverse_reactions" in drug_info:
            st.write("**Adverse Reactions:**")
            st.write(drug_info["adverse_reactions"][0])
        
        if "drug_interactions" in drug_info:
            st.write("**Drug Interactions:**")
            st.write(drug_info["drug_interactions"][0])
        
        if "pregnancy" in drug_info:
            st.write("**Pregnancy:**")
            st.write(drug_info["pregnancy"][0])
    else:
        st.warning(f"No information found for {drug_name}")

# Footer
st.markdown("---")
st.write("Data source: FDA API")