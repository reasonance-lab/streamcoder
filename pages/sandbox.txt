import streamlit as st
import requests

# Set up the Streamlit page
st.title("FDA Drug Information Lookup")

# Create an input field for the drug name
drug_name = st.text_input("Enter a drug name:")

if drug_name:
    # FDA API endpoint
    url = f"https://api.fda.gov/drug/label.json?search=openfda.brand_name:{drug_name}&limit=1"

    try:
        # Make a GET request to the FDA API
        response = requests.get(url)
        data = response.json()

        if 'results' in data and len(data['results']) > 0:
            drug_info = data['results'][0]

            # Display drug information
            st.header(f"Information for {drug_name}")

            # Extract and display relevant information
            if 'indications_and_usage' in drug_info:
                st.subheader("Indications and Usage")
                st.write(drug_info['indications_and_usage'][0])

            if 'warnings' in drug_info:
                st.subheader("Warnings")
                st.write(drug_info['warnings'][0])

            if 'adverse_reactions' in drug_info:
                st.subheader("Adverse Reactions")
                st.write(drug_info['adverse_reactions'][0])

            if 'drug_interactions' in drug_info:
                st.subheader("Drug Interactions")
                st.write(drug_info['drug_interactions'][0])

            if 'dosage_and_administration' in drug_info:
                st.subheader("Dosage and Administration")
                st.write(drug_info['dosage_and_administration'][0])

        else:
            st.error(f"No information found for {drug_name}")

    except requests.exceptions.RequestException as e:
        st.error(f"An error occurred while fetching data: {e}")

# Instructions for the user
st.sidebar.header("How to use")
st.sidebar.write("1. Enter the name of a drug in the text box.")
st.sidebar.write("2. Press Enter or click outside the text box.")
st.sidebar.write("3. The app will fetch and display information about the drug from the FDA database.")