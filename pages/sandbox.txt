import streamlit as st
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# Generate fictitious data
np.random.seed(42)
dates = pd.date_range(start='2023-01-01', end='2023-12-31', freq='D')
sales = np.random.randint(100, 1000, size=len(dates))
customers = np.random.randint(10, 100, size=len(dates))

# Create DataFrame
df = pd.DataFrame({
    'Date': dates,
    'Sales': sales,
    'Customers': customers
})

# Streamlit app
st.title('E-commerce Sales Dashboard')

# Display raw data
st.subheader('Raw Data')
st.dataframe(df)

# Basic statistics
st.subheader('Basic Statistics')
st.write(df.describe())

# Data visualization
st.subheader('Data Visualization')

# Monthly sales trend
fig, ax = plt.subplots(figsize=(12, 6))
monthly_sales = df.resample('M', on='Date')['Sales'].sum()
ax.plot(monthly_sales.index, monthly_sales.values, marker='o')
ax.set_title('Monthly Sales Trend')
ax.set_xlabel('Month')
ax.set_ylabel('Total Sales')
plt.xticks(rotation=45)
st.pyplot(fig)

# Sales vs Customers scatter plot
fig, ax = plt.subplots(figsize=(10, 6))
ax.scatter(df['Customers'], df['Sales'], alpha=0.5)
ax.set_title('Sales vs Customers')
ax.set_xlabel('Number of Customers')
ax.set_ylabel('Sales')
st.pyplot(fig)

# Sales distribution histogram
fig, ax = plt.subplots(figsize=(10, 6))
ax.hist(df['Sales'], bins=20, edgecolor='black')
ax.set_title('Sales Distribution')
ax.set_xlabel('Sales')
ax.set_ylabel('Frequency')
st.pyplot(fig)

# Weekday average sales
df['Weekday'] = df['Date'].dt.day_name()
weekday_sales = df.groupby('Weekday')['Sales'].mean().reindex(['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'])

fig, ax = plt.subplots(figsize=(10, 6))
ax.bar(weekday_sales.index, weekday_sales.values)
ax.set_title('Average Sales by Weekday')
ax.set_xlabel('Weekday')
ax.set_ylabel('Average Sales')
plt.xticks(rotation=45)
st.pyplot(fig)