import streamlit as st
import requests

def get_drug_info(drug_name):
    base_url = "https://api.fda.gov/drug/label.json"
    params = {
        "search": f"openfda.brand_name:{drug_name}",
        "limit": 1
    }
    
    response = requests.get(base_url, params=params)
    
    if response.status_code == 200:
        data = response.json()
        if data["results"]:
            return data["results"][0]
    return None

def format_drug_info(drug_info):
    formatted_info = ""
    
    if "brand_name" in drug_info:
        formatted_info += f"Brand Name: {drug_info['brand_name'][0]}\n\n"
    
    if "generic_name" in drug_info:
        formatted_info += f"Generic Name: {drug_info['generic_name'][0]}\n\n"
    
    if "indications_and_usage" in drug_info:
        formatted_info += "Indications and Usage:\n"
        for indication in drug_info["indications_and_usage"]:
            formatted_info += f"• {indication}\n"
        formatted_info += "\n"
    
    if "warnings" in drug_info:
        formatted_info += "Warnings:\n"
        for warning in drug_info["warnings"]:
            formatted_info += f"• {warning}\n"
        formatted_info += "\n"
    
    if "dosage_and_administration" in drug_info:
        formatted_info += "Dosage and Administration:\n"
        for dosage in drug_info["dosage_and_administration"]:
            formatted_info += f"• {dosage}\n"
        formatted_info += "\n"
    
    return formatted_info

st.title("Drug Information Lookup")

drug_name = st.text_input("Enter a drug name:")

if drug_name:
    drug_info = get_drug_info(drug_name)
    
    if drug_info:
        formatted_info = format_drug_info(drug_info)
        st.text_area("Drug Information", formatted_info, height=400)
    else:
        st.error("Drug information not found. Please check the spelling or try another drug name.")